<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Test</title>
</head>
<body>
    <h1>WebSocket Test</h1>
    <div id="status">Connecting...</div>
    <div id="messages" style="margin-top: 20px; font-family: monospace; white-space: pre;"></div>
    
    <script>
        const statusDiv = document.getElementById('status');
        const messagesDiv = document.getElementById('messages');
        
        function log(msg) {
            const timestamp = new Date().toLocaleTimeString();
            messagesDiv.textContent = `[${timestamp}] ${msg}\n` + messagesDiv.textContent;
        }
        
        const ws = new WebSocket("ws://127.0.0.1:8000/ws/");
        
        ws.onopen = () => {
            statusDiv.textContent = "âœ… Connected";
            statusDiv.style.color = "green";
            log("WebSocket connection opened");
        };
        
        ws.onmessage = (event) => {
            log(`ðŸ“¨ Received: ${event.data}`);
        };
        
        ws.onerror = (error) => {
            statusDiv.textContent = "âŒ Error";
            statusDiv.style.color = "red";
            log(`âŒ Error: ${error}`);
        };
        
        ws.onclose = (event) => {
            statusDiv.textContent = `ðŸ”´ Closed (code: ${event.code})`;
            statusDiv.style.color = "orange";
            log(`ðŸ”´ Connection closed (code: ${event.code}, reason: ${event.reason})`);
        };
    </script>
</body>
</html>
